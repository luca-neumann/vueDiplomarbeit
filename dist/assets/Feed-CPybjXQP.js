import{a as u}from"./axios-BimPEqV4.js";import{_,r as m,o as p,b as s,c as a,d as e,F as h,I as b,t as n,a as x,f as g,e as f}from"./index-Dl-zu0tW.js";const y={name:"TableData",setup(){const d=m([]),c=async()=>{try{const t=await u.get("http://localhost/php/vuediplomarbeit/src/api/sensordata.php?action=read");console.log(t.data),d.value=t.data.sensordata}catch(t){console.error("An error occurred while fetching sensor data:",t)}},l=t=>new Date(t).toLocaleTimeString(),o=t=>new Date(t).toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"});return p(()=>{c()}),{sensorData:d,formatTime:l,formatDate:o}}},D={class:"flex justify-center mt-10"},k={class:"w-4/5 bg-green-700 rounded-lg"},T={class:"w-full border-collapse"},v=e("thead",null,[e("tr",null,[e("th",{class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},"Client"),e("th",{class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},"Pm1"),e("th",{class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},"Pm2.5"),e("th",{class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},"Pm10"),e("th",{class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},"Zeitpunkt"),e("th",{class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},"Datum")])],-1),w={key:0},I=e("td",{colspan:"6",class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"}," Keine Daten verfÃ¼gbar oder Verbindung zur Datenbank fehlgeschlagen. ",-1),$=[I],F={class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},P={class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},S={class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},V={class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},B={class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"},C={class:"border border-green-600 p-2 text-center text-gray-800 rounded-lg"};function L(d,c,l,o,t,i){return s(),a("div",D,[e("div",k,[e("table",T,[v,e("tbody",null,[o.sensorData.length===0?(s(),a("tr",w,$)):(s(!0),a(h,{key:1},b(o.sensorData,r=>(s(),a("tr",{key:r.ValueID},[e("td",F,n(r.ClientID),1),e("td",P,n(r["Pm1.0"]),1),e("td",S,n(r["Pm2.5"]),1),e("td",V,n(r.Pm10),1),e("td",B,n(o.formatTime(r.Timestamp)),1),e("td",C,n(o.formatDate(r.Date)),1)]))),128))])])])])}const N=_(y,[["render",L]]),z={name:"Feed",data(){return{user:null}},components:{TableData:N},async created(){const d=localStorage.getItem("userid"),c=await u.get(`http://localhost/php/vuediplomarbeit/src/api/user.php?action=getUser&UserID=${d}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.user=c.data.user}},A=e("h1",{class:"text-4xl font-bold text-center mt-10"},"Feed",-1),E={key:0,class:"text-3xl font-bold text-center mt-3"},U={key:1,class:"text-3xl font-bold text-center mt-3"};function W(d,c,l,o,t,i){const r=x("TableData");return s(),a(h,null,[A,t.user?(s(),a("h3",E,"Willkommen, "+n(t.user.Firstname),1)):g("",!0),t.user?g("",!0):(s(),a("h3",U,"Willkommen")),f(r)],64)}const M=_(z,[["render",W]]);export{M as default};
