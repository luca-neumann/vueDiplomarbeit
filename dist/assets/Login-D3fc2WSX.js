import{_ as b,i as v,u as w,j as h,b as i,c as d,d as r,k as D,n as p,l as m,v as u,f as g,p as _,m as k}from"./index-Dl-zu0tW.js";import{u as y,r as f,e as $,m as I}from"./index-DhBedBXW.js";import{a as x}from"./axios-BimPEqV4.js";const L={name:"Login",setup(){const o=v({loginData:{email:"",password:""}}),e={loginData:{email:{required:f,email:$},password:{required:f,minLength:I(6)}}},l=y(e,o),s=w(),c=async()=>{if(l.$invalid){console.log("Validation failed");return}try{const a=await x.post("http://localhost/php/vuediplomarbeit/src/api/user.php?action=login",o.loginData,{headers:{"Content-Type":"application/json"}});console.log(a.data),a.data.error?console.error(a.data.message):(console.log("Login successful, User ID:",a.data.user.UserID),console.log("Token:",a.data.token),localStorage.setItem("token",a.data.token),localStorage.setItem("userid",a.data.user.UserID),s.push("/feed"),location.reload())}catch(a){console.error("An error occurred:",a)}};return{...h(o),v$:l,login:c}}},n=o=>(_("data-v-53b3f4b7"),o=o(),k(),o),S={class:"flex justify-center items-center mt-10"},V={class:"w-1/3"},B=n(()=>r("h2",{class:"text-2xl font-bold mb-4"},"Login",-1)),U=n(()=>r("label",{for:"email",class:"block mb-2"},"Email",-1)),j={key:0},q=n(()=>r("label",{for:"password",class:"block mb-2"},"Password",-1)),C={key:0},E=n(()=>r("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800",onclick:""},"Login",-1));function T(o,e,l,s,c,a){return i(),d("div",S,[r("div",V,[B,r("form",{onSubmit:e[4]||(e[4]=D((...t)=>s.login&&s.login(...t),["prevent"]))},[r("div",{class:p(["mb-4",{"form-group-error":s.v$.loginData.email.$error}])},[U,m(r("input",{type:"email",id:"email",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":e[0]||(e[0]=t=>o.loginData.email=t),onBlur:e[1]||(e[1]=t=>s.v$.loginData.email.$touch())},null,544),[[u,o.loginData.email]]),s.v$.loginData.email.$error?(i(),d("span",j,"Email is required or incorrect")):g("",!0)],2),r("div",{class:p(["mb-4",{"form-group-error":s.v$.loginData.password.$error}])},[q,m(r("input",{type:"password",id:"password",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":e[2]||(e[2]=t=>o.loginData.password=t),onBlur:e[3]||(e[3]=t=>s.v$.loginData.password.$touch())},null,544),[[u,o.loginData.password]]),s.v$.loginData.password.$error?(i(),d("span",C,"Password is required")):g("",!0)],2),E],32)])])}const R=b(L,[["render",T],["__scopeId","data-v-53b3f4b7"]]);export{R as default};
