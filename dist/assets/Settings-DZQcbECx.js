import{_ as h,i as U,o as g,j as k,b as n,c as d,d as o,k as w,n as l,l as i,v as u,f as p,p as $,m as y}from"./index-Dl-zu0tW.js";import{u as S,m as b,e as B,r as _}from"./index-DhBedBXW.js";import{a as v}from"./axios-BimPEqV4.js";const I={name:"Settings",setup(){const e=U({user:{firstname:"",lastname:"",brokername:"",email:"",password:""},updateUser:{firstname:"",lastname:"",brokername:"",email:"",password:""}}),s={updateUser:{firstname:{minLength:b(3)},lastname:{minLength:b(3)},brokername:{minLength:b(7)},email:{email:B},password:{required:_,minLength:b(6)}}},m=S(s,e),a=async()=>{const c=localStorage.getItem("userid"),r=await v.get(`http://localhost/php/vuediplomarbeit/src/api/user.php?action=getUser&UserID=${c}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});console.log(r.data.user),e.user=r.data.user,e.updateUser={...r.data.user}},f=async()=>{if(m.value.$validate(),m.value.$error)return;const c=localStorage.getItem("userid"),r=await v.post(`http://localhost/php/vuediplomarbeit/src/api/user.php?action=updateUser&UserID=${c}`,e.updateUser,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});console.log("User updated successfully"),console.log(r.data),r.data.user&&(e.user=r.data.user,e.updateUser={...r.data.user})};return g(a),{...k(e),v$:m,updateSettings:f}}},t=e=>($("data-v-35620183"),e=e(),y(),e),L={class:"flex justify-center items-center mt-10"},V={class:"w-1/3"},q=t(()=>o("h2",{class:"text-2xl font-bold mb-4"},"Settings",-1)),D=t(()=>o("label",{for:"firstname",class:"block mb-2"},"First Name",-1)),E=["placeholder"],N={key:0},x=t(()=>o("label",{for:"lastname",class:"block mb-2"},"Last Name",-1)),z=["placeholder"],F={key:0},M=t(()=>o("label",{for:"brokername",class:"block mb-2"},"Brokername",-1)),j=["placeholder"],A={key:0},C=t(()=>o("label",{for:"email",class:"block mb-2"},"Email",-1)),P=["placeholder"],R={key:0},T=t(()=>o("label",{for:"password",class:"block mb-2"},"Password",-1)),G=["placeholder"],H={key:0},J=t(()=>o("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800"},"Save",-1));function K(e,s,m,a,f,c){return n(),d("div",L,[o("div",V,[q,o("form",{onSubmit:s[10]||(s[10]=w((...r)=>a.updateSettings&&a.updateSettings(...r),["prevent"]))},[o("div",{class:l(["mb-4",{"form-group-error":a.v$.updateUser.firstname.$error}])},[D,i(o("input",{type:"text",id:"firstname",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:e.user.Firstname,"onUpdate:modelValue":s[0]||(s[0]=r=>e.updateUser.firstname=r),onBlur:s[1]||(s[1]=r=>a.v$.updateUser.firstname.$touch())},null,40,E),[[u,e.updateUser.firstname]]),a.v$.updateUser.firstname.$error?(n(),d("span",N,"First name is required and must be at least 3 characters long")):p("",!0)],2),o("div",{class:l(["mb-4",{"form-group-error":a.v$.updateUser.lastname.$error}])},[x,i(o("input",{type:"text",id:"lastname",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:e.user.Lastname,"onUpdate:modelValue":s[2]||(s[2]=r=>e.updateUser.lastname=r),onBlur:s[3]||(s[3]=r=>a.v$.updateUser.lastname.$touch())},null,40,z),[[u,e.updateUser.lastname]]),a.v$.updateUser.lastname.$error?(n(),d("span",F,"Last name is required and must be at least 3 characters long")):p("",!0)],2),o("div",{class:l(["mb-4",{"form-group-error":a.v$.updateUser.brokername.$error}])},[M,i(o("input",{type:"text",id:"brokername",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:e.user.Brokername,"onUpdate:modelValue":s[4]||(s[4]=r=>e.updateUser.brokername=r),onBlur:s[5]||(s[5]=r=>a.v$.updateUser.brokername.$touch())},null,40,j),[[u,e.updateUser.brokername]]),a.v$.updateUser.brokername.$error?(n(),d("span",A,"Brokername is too short")):p("",!0)],2),o("div",{class:l(["mb-4",{"form-group-error":a.v$.updateUser.email.$error}])},[C,i(o("input",{type:"email",id:"email",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:e.user.Email,"onUpdate:modelValue":s[6]||(s[6]=r=>e.updateUser.email=r),onBlur:s[7]||(s[7]=r=>a.v$.updateUser.email.$touch())},null,40,P),[[u,e.updateUser.email]]),a.v$.updateUser.email.$error?(n(),d("span",R,"Email is incorrect")):p("",!0)],2),o("div",{class:l(["mb-4",{"form-group-error":a.v$.updateUser.password.$error}])},[T,i(o("input",{type:"password",id:"password",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:e.user.password,"onUpdate:modelValue":s[8]||(s[8]=r=>e.updateUser.password=r),onBlur:s[9]||(s[9]=r=>a.v$.updateUser.password.$touch())},null,40,G),[[u,e.updateUser.password]]),a.v$.updateUser.password.$error?(n(),d("span",H,"Password is required")):p("",!0)],2),J],32)])])}const X=h(I,[["render",K],["__scopeId","data-v-35620183"]]);export{X as default};
