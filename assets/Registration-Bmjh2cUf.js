import{_ as h,i as v,u as y,r as k,j as $,b as a,c as i,d as o,e as B,w as V,T as E,k as N,n as m,l as g,v as u,g as d,t as x,p as _,m as M}from"./index-D3ouuQFZ.js";import{u as P,r as w,m as b,e as T}from"./index-DLCzZBGj.js";import{a as D}from"./axios-BimPEqV4.js";const S={name:"Registration",setup(){const r=v({newRegistration:{Vorname:"",Nachname:"",Email:"",Passwort:"",Brokername:""}}),e={newRegistration:{Vorname:{required:w,minLength:b(3)},Nachname:{required:w,minLength:b(3)},Email:{required:w,email:T},Passwort:{required:w,minLength:b(6)},Brokername:{required:w,minLength:b(7)}}},f=P(e,r),t=y(),p=k("");let c=null;const s=n=>{p.value=n,c&&clearTimeout(c),c=setTimeout(()=>{p.value=""},5e3)},R=async()=>{if(f.value.$invalid){console.log("Validation failed");return}try{const n=await D.post("https://os-beyond.at/htl/smart_sensor_netz/register",JSON.stringify(r.newRegistration),{headers:{"Content-Type":"application/json"}});if(console.log("Server Response:",n.data),n.data.error){n.data.message==="E-Mail bereits registriert"?s("❌ Diese E-Mail ist bereits registriert!"):s(`⚠️ Fehler: ${n.data.message}`);return}console.log("User added successfully"),r.newRegistration.Vorname="",r.newRegistration.Nachname="",r.newRegistration.Email="",r.newRegistration.Passwort="",r.newRegistration.Brokername="",t.push("/login")}catch(n){console.error("Ein Fehler ist aufgetreten:",n),n.response?(console.log("Error Response:",n.response.data),n.response.status===400||n.response.status===409?n.response.data.message==="E-Mail bereits registriert"?s("❌ Diese E-Mail ist bereits registriert!"):s(`⚠️ Fehler: ${n.response.data.message}`):s(`⚠️ Fehler: ${n.response.status} - Bitte versuche es später erneut.`)):s("⚠️ Fehler bei der Registrierung. Bitte überprüfe deine Internetverbindung.")}};return{...$(r),v$:f,addNewRegistrationToDd:R,errorMessage:p}}},l=r=>(_("data-v-129771a9"),r=r(),M(),r),U={class:"flex justify-center items-center mt-10"},F={class:"w-1/3"},I=l(()=>o("h2",{class:"text-2xl font-bold mb-4"},"Registrierung",-1)),L={key:0,class:"text-red-600 font-bold mb-4"},C=l(()=>o("label",{for:"Vorname",class:"block mb-2"},"Vorname",-1)),Z={key:0,class:"text-red-500"},j=l(()=>o("label",{for:"Nachname",class:"block mb-2"},"Nachname",-1)),z={key:0,class:"text-red-500"},q=l(()=>o("label",{for:"Brokername",class:"block mb-2"},"Brokername",-1)),A={key:0,class:"text-red-500"},J=l(()=>o("label",{for:"email",class:"block mb-2"},"E-Mail",-1)),O={key:0,class:"text-red-500"},G=l(()=>o("label",{for:"Passwort",class:"block mb-2"},"Passwort",-1)),H={key:0,class:"text-red-500"},K=l(()=>o("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800"},"Registrieren 📝",-1));function Q(r,e,f,t,p,c){return a(),i("div",U,[o("div",F,[I,B(E,{name:"fade"},{default:V(()=>[t.errorMessage?(a(),i("p",L,x(t.errorMessage),1)):d("",!0)]),_:1}),o("form",{onSubmit:e[10]||(e[10]=N((...s)=>t.addNewRegistrationToDd&&t.addNewRegistrationToDd(...s),["prevent"]))},[o("div",{class:m(["mb-4",{"form-group-error":t.v$.newRegistration.Vorname.$error}])},[C,g(o("input",{type:"text",id:"Vorname",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[0]||(e[0]=s=>r.newRegistration.Vorname=s),onBlur:e[1]||(e[1]=s=>t.v$.newRegistration.Vorname.$touch())},null,544),[[u,r.newRegistration.Vorname]]),t.v$.newRegistration.Vorname.$error?(a(),i("span",Z,"Vorname muss mindestens 3 Zeichen haben")):d("",!0)],2),o("div",{class:m(["mb-4",{"form-group-error":t.v$.newRegistration.Nachname.$error}])},[j,g(o("input",{type:"text",id:"Nachname",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[2]||(e[2]=s=>r.newRegistration.Nachname=s),onBlur:e[3]||(e[3]=s=>t.v$.newRegistration.Nachname.$touch())},null,544),[[u,r.newRegistration.Nachname]]),t.v$.newRegistration.Nachname.$error?(a(),i("span",z,"Nachname muss mindestens 3 Zeichen haben")):d("",!0)],2),o("div",{class:m(["mb-4",{"form-group-error":t.v$.newRegistration.Brokername.$error}])},[q,g(o("input",{type:"text",id:"Brokername",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[4]||(e[4]=s=>r.newRegistration.Brokername=s),onBlur:e[5]||(e[5]=s=>t.v$.newRegistration.Brokername.$touch())},null,544),[[u,r.newRegistration.Brokername]]),t.v$.newRegistration.Brokername.$error?(a(),i("span",A,"Brokername muss mindestens 7 Zeichen haben")):d("",!0)],2),o("div",{class:m(["mb-4",{"form-group-error":t.v$.newRegistration.Email.$error}])},[J,g(o("input",{type:"email",id:"email",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[6]||(e[6]=s=>r.newRegistration.Email=s),onBlur:e[7]||(e[7]=s=>t.v$.newRegistration.Email.$touch())},null,544),[[u,r.newRegistration.Email]]),t.v$.newRegistration.Email.$error?(a(),i("span",O,"Eine gültige E-Mail-Adresse ist erforderlich")):d("",!0)],2),o("div",{class:m(["mb-4",{"form-group-error":t.v$.newRegistration.Passwort.$error}])},[G,g(o("input",{type:"password",id:"Passwort",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[8]||(e[8]=s=>r.newRegistration.Passwort=s),onBlur:e[9]||(e[9]=s=>t.v$.newRegistration.Passwort.$touch())},null,544),[[u,r.newRegistration.Passwort]]),t.v$.newRegistration.Passwort.$error?(a(),i("span",H,"Passwort muss mindestens 6 Zeichen haben")):d("",!0)],2),K],32)])])}const ee=h(S,[["render",Q],["__scopeId","data-v-129771a9"]]);export{ee as default};
