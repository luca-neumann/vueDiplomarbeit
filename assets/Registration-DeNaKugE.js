import{_ as v,i as h,u as y,r as k,j as V,b as n,c as a,d as s,e as $,w as B,T as N,k as x,n as d,l as m,v as g,g as l,t as E,p as _,m as P}from"./index-CSRtn9D1.js";import{u as M,r as u,m as b,e as T}from"./index-DJTZ__r-.js";import{a as D}from"./axios-BimPEqV4.js";const S={name:"Registration",setup(){const r=h({newRegistration:{Vorname:"",Nachname:"",Email:"",Passwort:"",Brokername:""}}),e={newRegistration:{Vorname:{required:u,minLength:b(3)},Nachname:{required:u,minLength:b(3)},Email:{required:u,email:T},Passwort:{required:u,minLength:b(6)},Brokername:{required:u,minLength:b(7)}}},R=M(e,r),o=y(),w=k("");let c=null;const t=p=>{w.value=p,c&&clearTimeout(c),c=setTimeout(()=>{w.value=""},5e3)},f=async()=>{if(R.value.$invalid){console.log("Validation failed");return}try{if((await D.post("https://os-beyond.at/htl/smart_sensor_netz/register",JSON.stringify(r.newRegistration),{headers:{"Content-Type":"application/json"}})).data.message==="E-Mail bereits registriert"){t("❌ Diese E-Mail ist bereits registriert!");return}console.log("User added successfully"),r.newRegistration.Vorname="",r.newRegistration.Nachname="",r.newRegistration.Email="",r.newRegistration.Passwort="",r.newRegistration.Brokername="",o.push("/login")}catch(p){console.error("An error occurred:",p),t("⚠️ Fehler bei der Registrierung. Bitte versuche es später erneut.")}};return{...V(r),v$:R,addNewRegistrationToDd:f,errorMessage:w}}},i=r=>(_("data-v-64ca0a15"),r=r(),P(),r),U={class:"flex justify-center items-center mt-10"},L={class:"w-1/3"},C=i(()=>s("h2",{class:"text-2xl font-bold mb-4"},"Registrierung",-1)),I={key:0,class:"text-red-600 font-bold mb-4"},Z=i(()=>s("label",{for:"Vorname",class:"block mb-2"},"Vorname",-1)),j={key:0,class:"text-red-500"},z=i(()=>s("label",{for:"Nachname",class:"block mb-2"},"Nachname",-1)),A={key:0,class:"text-red-500"},q=i(()=>s("label",{for:"Brokername",class:"block mb-2"},"Brokername",-1)),F={key:0,class:"text-red-500"},J=i(()=>s("label",{for:"email",class:"block mb-2"},"E-Mail",-1)),O={key:0,class:"text-red-500"},G=i(()=>s("label",{for:"Passwort",class:"block mb-2"},"Passwort",-1)),H={key:0,class:"text-red-500"},K=i(()=>s("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800"},"Registrieren 📝",-1));function Q(r,e,R,o,w,c){return n(),a("div",U,[s("div",L,[C,$(N,{name:"fade"},{default:B(()=>[o.errorMessage?(n(),a("p",I,E(o.errorMessage),1)):l("",!0)]),_:1}),s("form",{onSubmit:e[10]||(e[10]=x((...t)=>o.addNewRegistrationToDd&&o.addNewRegistrationToDd(...t),["prevent"]))},[s("div",{class:d(["mb-4",{"form-group-error":o.v$.newRegistration.Vorname.$error}])},[Z,m(s("input",{type:"text",id:"Vorname",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[0]||(e[0]=t=>r.newRegistration.Vorname=t),onBlur:e[1]||(e[1]=t=>o.v$.newRegistration.Vorname.$touch())},null,544),[[g,r.newRegistration.Vorname]]),o.v$.newRegistration.Vorname.$error?(n(),a("span",j,"Vorname muss mindestens 3 Zeichen haben")):l("",!0)],2),s("div",{class:d(["mb-4",{"form-group-error":o.v$.newRegistration.Nachname.$error}])},[z,m(s("input",{type:"text",id:"Nachname",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[2]||(e[2]=t=>r.newRegistration.Nachname=t),onBlur:e[3]||(e[3]=t=>o.v$.newRegistration.Nachname.$touch())},null,544),[[g,r.newRegistration.Nachname]]),o.v$.newRegistration.Nachname.$error?(n(),a("span",A,"Nachname muss mindestens 3 Zeichen haben")):l("",!0)],2),s("div",{class:d(["mb-4",{"form-group-error":o.v$.newRegistration.Brokername.$error}])},[q,m(s("input",{type:"text",id:"Brokername",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[4]||(e[4]=t=>r.newRegistration.Brokername=t),onBlur:e[5]||(e[5]=t=>o.v$.newRegistration.Brokername.$touch())},null,544),[[g,r.newRegistration.Brokername]]),o.v$.newRegistration.Brokername.$error?(n(),a("span",F,"Brokername muss mindestens 7 Zeichen haben")):l("",!0)],2),s("div",{class:d(["mb-4",{"form-group-error":o.v$.newRegistration.Email.$error}])},[J,m(s("input",{type:"email",id:"email",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[6]||(e[6]=t=>r.newRegistration.Email=t),onBlur:e[7]||(e[7]=t=>o.v$.newRegistration.Email.$touch())},null,544),[[g,r.newRegistration.Email]]),o.v$.newRegistration.Email.$error?(n(),a("span",O,"Eine gültige E-Mail-Adresse ist erforderlich")):l("",!0)],2),s("div",{class:d(["mb-4",{"form-group-error":o.v$.newRegistration.Passwort.$error}])},[G,m(s("input",{type:"password",id:"Passwort",class:"w-full px-4 py-2 border border-gray-300 rounded","onUpdate:modelValue":e[8]||(e[8]=t=>r.newRegistration.Passwort=t),onBlur:e[9]||(e[9]=t=>o.v$.newRegistration.Passwort.$touch())},null,544),[[g,r.newRegistration.Passwort]]),o.v$.newRegistration.Passwort.$error?(n(),a("span",H,"Passwort muss mindestens 6 Zeichen haben")):l("",!0)],2),K],32)])])}const ee=v(S,[["render",Q],["__scopeId","data-v-64ca0a15"]]);export{ee as default};
