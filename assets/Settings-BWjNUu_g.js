import{_ as f,i as U,r as y,o as k,j as w,b as s,c as n,d as t,g as d,k as $,n as m,l as i,v as p,p as B,m as E}from"./index-GsPRFIxi.js";import{u as V,m as c,e as S,r as _}from"./index-byrjIE5z.js";import{a as v}from"./axios-BimPEqV4.js";const N={name:"Settings",setup(){const r=U({user:{Vorname:"",Nachname:"",Brokername:"",Email:"",Passwort:""},updateUser:{Vorname:"",Nachname:"",Brokername:"",Email:"",Passwort:""}}),e=y(!1),h={updateUser:{Vorname:{minLength:c(3)},Nachname:{minLength:c(3)},Brokername:{minLength:c(7)},Email:{email:S},Passwort:{required:_,minLength:c(6)}}},o=V(h,r),b=async()=>{try{const a=localStorage.getItem("userid"),u=await v.get(`https://os-beyond.at/htl/smart_sensor_netz/user/${a}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});console.log("User data fetched:",u.data),r.user=u.data||{}}catch(a){console.error("Error fetching user data:",a)}},g=async()=>{if(o.value.$validate(),!o.value.$error)try{const a=localStorage.getItem("userid"),u=await v.post(`https://os-beyond.at/htl/smart_sensor_netz/user/${a}`,r.updateUser,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});console.log("User updated successfully:",u.data),u.data&&(r.user={...r.updateUser},e.value=!0,setTimeout(()=>e.value=!1,3e3))}catch(a){console.error("Error updating user:",a)}};return k(()=>{b()}),{...w(r),v$:o,updateSuccess:e,updateSettings:g}}},l=r=>(B("data-v-a38284b4"),r=r(),E(),r),P={class:"flex justify-center items-center mt-10"},I={class:"w-1/3"},L=l(()=>t("h2",{class:"text-2xl font-bold mb-4"},"Settings",-1)),x={key:0,class:"text-green-600 font-bold mb-4"},z=l(()=>t("label",{for:"Vorname",class:"block mb-2"},"First Name",-1)),M=["placeholder"],j={key:0},A=l(()=>t("label",{for:"Nachname",class:"block mb-2"},"Last Name",-1)),C=["placeholder"],D={key:0},F=l(()=>t("label",{for:"Brokername",class:"block mb-2"},"Brokername",-1)),T=["placeholder"],q={key:0},R=l(()=>t("label",{for:"Email",class:"block mb-2"},"Email",-1)),G=["placeholder"],H={key:0},J=l(()=>t("label",{for:"Passwort",class:"block mb-2"},"Passwort",-1)),K={key:0},O=l(()=>t("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800"},"Save",-1));function Q(r,e,h,o,b,g){return s(),n("div",P,[t("div",I,[L,o.updateSuccess?(s(),n("p",x,"Settings updated successfully!")):d("",!0),t("form",{onSubmit:e[10]||(e[10]=$((...a)=>o.updateSettings&&o.updateSettings(...a),["prevent"]))},[t("div",{class:m(["mb-4",{"form-group-error":o.v$.updateUser.Vorname.$error}])},[z,i(t("input",{type:"text",id:"Vorname",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:r.user.Vorname||"Enter your first name","onUpdate:modelValue":e[0]||(e[0]=a=>r.updateUser.Vorname=a),onBlur:e[1]||(e[1]=a=>o.v$.updateUser.Vorname.$touch())},null,40,M),[[p,r.updateUser.Vorname]]),o.v$.updateUser.Vorname.$error?(s(),n("span",j,"First name must be at least 3 characters long")):d("",!0)],2),t("div",{class:m(["mb-4",{"form-group-error":o.v$.updateUser.Nachname.$error}])},[A,i(t("input",{type:"text",id:"Nachname",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:r.user.Nachname||"Enter your last name","onUpdate:modelValue":e[2]||(e[2]=a=>r.updateUser.Nachname=a),onBlur:e[3]||(e[3]=a=>o.v$.updateUser.Nachname.$touch())},null,40,C),[[p,r.updateUser.Nachname]]),o.v$.updateUser.Nachname.$error?(s(),n("span",D,"Last name must be at least 3 characters long")):d("",!0)],2),t("div",{class:m(["mb-4",{"form-group-error":o.v$.updateUser.Brokername.$error}])},[F,i(t("input",{type:"text",id:"Brokername",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:r.user.Brokername||"Enter your broker name","onUpdate:modelValue":e[4]||(e[4]=a=>r.updateUser.Brokername=a),onBlur:e[5]||(e[5]=a=>o.v$.updateUser.Brokername.$touch())},null,40,T),[[p,r.updateUser.Brokername]]),o.v$.updateUser.Brokername.$error?(s(),n("span",q,"Brokername must be at least 7 characters long")):d("",!0)],2),t("div",{class:m(["mb-4",{"form-group-error":o.v$.updateUser.Email.$error}])},[R,i(t("input",{type:"email",id:"Email",class:"w-full px-4 py-2 border border-green-500 rounded",placeholder:r.user.Email||"Enter your email","onUpdate:modelValue":e[6]||(e[6]=a=>r.updateUser.Email=a),onBlur:e[7]||(e[7]=a=>o.v$.updateUser.Email.$touch())},null,40,G),[[p,r.updateUser.Email]]),o.v$.updateUser.Email.$error?(s(),n("span",H,"Enter a valid email")):d("",!0)],2),t("div",{class:m(["mb-4",{"form-group-error":o.v$.updateUser.Passwort.$error}])},[J,i(t("input",{type:"password",id:"Passwort",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":e[8]||(e[8]=a=>r.updateUser.Passwort=a),onBlur:e[9]||(e[9]=a=>o.v$.updateUser.Passwort.$touch())},null,544),[[p,r.updateUser.Passwort]]),o.v$.updateUser.Passwort.$error?(s(),n("span",K,"Passwort must be at least 6 characters long")):d("",!0)],2),O],32)])])}const Z=f(N,[["render",Q],["__scopeId","data-v-a38284b4"]]);export{Z as default};
