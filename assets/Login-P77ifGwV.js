import{_ as b,i as w,u as v,j as h,b as i,c as d,d as a,k as _,n as m,l as g,v as u,g as p,p as D,m as y}from"./index-GsPRFIxi.js";import{u as k,r as f,e as E,m as $}from"./index-byrjIE5z.js";import{a as P}from"./axios-BimPEqV4.js";const I={name:"Login",setup(){const o=w({loginData:{Email:"",Passwort:""}}),e={loginData:{Email:{required:f,email:E},Passwort:{required:f,minLength:$(6)}}},l=k(e,o),s=v(),c=async()=>{if(l.$invalid){console.log("Validation failed");return}try{const t=await P.post("https://os-beyond.at/htl/smart_sensor_netz/login",JSON.stringify(o.loginData),{headers:{"Content-Type":"application/json"}});console.log(t.data),t.data.error?console.error(t.data.message):(console.log("Login successful, User ID:",t.userId),console.log("Token:",t.token),localStorage.setItem("token",t.data.token),localStorage.setItem("userid",t.data.userId),s.push("/feed"),location.reload())}catch(t){console.error("An error occurred:",t)}};return{...h(o),v$:l,login:c}}},n=o=>(D("data-v-369337e5"),o=o(),y(),o),x={class:"flex justify-center items-center mt-10"},L={class:"w-1/3"},S=n(()=>a("h2",{class:"text-2xl font-bold mb-4"},"Login",-1)),V=n(()=>a("label",{for:"Email",class:"block mb-2"},"Email",-1)),B={key:0},j=n(()=>a("label",{for:"Passwort",class:"block mb-2"},"Passwort",-1)),C={key:0},N=n(()=>a("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800",onclick:""},"Login",-1));function T(o,e,l,s,c,t){return i(),d("div",x,[a("div",L,[S,a("form",{onSubmit:e[4]||(e[4]=_((...r)=>s.login&&s.login(...r),["prevent"]))},[a("div",{class:m(["mb-4",{"form-group-error":s.v$.loginData.Email.$error}])},[V,g(a("input",{type:"email",id:"Email",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":e[0]||(e[0]=r=>o.loginData.Email=r),onBlur:e[1]||(e[1]=r=>s.v$.loginData.Email.$touch())},null,544),[[u,o.loginData.Email]]),s.v$.loginData.Email.$error?(i(),d("span",B,"Email wird benötigt oder ist falsch")):p("",!0)],2),a("div",{class:m(["mb-4",{"form-group-error":s.v$.loginData.Passwort.$error}])},[j,g(a("input",{type:"password",id:"Passwort",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":e[2]||(e[2]=r=>o.loginData.Passwort=r),onBlur:e[3]||(e[3]=r=>s.v$.loginData.Passwort.$touch())},null,544),[[u,o.loginData.Passwort]]),s.v$.loginData.Passwort.$error?(i(),d("span",C,"Passwort wird benötigt oder ist falsch")):p("",!0)],2),N],32)])])}const R=b(I,[["render",T],["__scopeId","data-v-369337e5"]]);export{R as default};
