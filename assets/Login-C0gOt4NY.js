import{_ as h,i as w,u as _,r as y,j as D,b as i,c as d,d as r,e as E,w as k,T as x,k as P,n as u,l as p,v as f,g,t as I,p as $,m as M}from"./index-CpyGGzKw.js";import{u as S,r as v,e as T,m as L}from"./index-BE6wRnPR.js";import{a as V}from"./axios-BimPEqV4.js";const B={name:"Login",setup(){const e=w({loginData:{Email:"",Passwort:""}}),o={loginData:{Email:{required:v,email:T},Passwort:{required:v,minLength:L(6)}}},m=S(o,e),s=_(),l=y("");let n=null;const a=t=>{l.value=t,n&&clearTimeout(n),n=setTimeout(()=>{l.value=""},5e3)},b=async()=>{if(l.value="",m.value.$invalid){console.log("Validation failed");return}try{const t=await V.post("https://os-beyond.at/htl/smart_sensor_netz/login",JSON.stringify(e.loginData),{headers:{"Content-Type":"application/json"}});console.log(t.data),t.data.error?(console.error(t.data.message),a("âŒ Falsche E-Mail oder falsches Passwort!")):(console.log("Login erfolgreich, User ID:",t.data.userId),console.log("Token:",t.data.token),localStorage.setItem("token",t.data.token),localStorage.setItem("userid",t.data.userId),s.push("/feed"),location.reload())}catch(t){console.error("Ein Fehler ist aufgetreten:",t),a("âš ï¸ Fehler beim Login. Bitte versuche es spÃ¤ter erneut.")}};return{...D(e),v$:m,login:b,errorMessage:l}}},c=e=>($("data-v-31632b55"),e=e(),M(),e),C={class:"flex justify-center items-center mt-10"},N={class:"w-1/3"},j=c(()=>r("h2",{class:"text-2xl font-bold mb-4"},"Anmelden",-1)),F={key:0,class:"text-red-600 font-bold mb-4"},U=c(()=>r("label",{for:"Email",class:"block mb-2"},"Email",-1)),z={key:0,class:"text-red-500"},R=c(()=>r("label",{for:"Passwort",class:"block mb-2"},"Passwort",-1)),q={key:0,class:"text-red-500"},A=c(()=>r("button",{type:"submit",class:"w-full bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800"}," LogIn ðŸ”“ ",-1));function G(e,o,m,s,l,n){return i(),d("div",C,[r("div",N,[j,E(x,{name:"fade"},{default:k(()=>[s.errorMessage?(i(),d("p",F,I(s.errorMessage),1)):g("",!0)]),_:1}),r("form",{onSubmit:o[4]||(o[4]=P((...a)=>s.login&&s.login(...a),["prevent"]))},[r("div",{class:u(["mb-4",{"form-group-error":s.v$.loginData.Email.$error}])},[U,p(r("input",{type:"email",id:"Email",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":o[0]||(o[0]=a=>e.loginData.Email=a),onBlur:o[1]||(o[1]=a=>s.v$.loginData.Email.$touch())},null,544),[[f,e.loginData.Email]]),s.v$.loginData.Email.$error?(i(),d("span",z,"GÃ¼ltige E-Mail erforderlich")):g("",!0)],2),r("div",{class:u(["mb-4",{"form-group-error":s.v$.loginData.Passwort.$error}])},[R,p(r("input",{type:"password",id:"Passwort",class:"w-full px-4 py-2 border border-green-500 rounded","onUpdate:modelValue":o[2]||(o[2]=a=>e.loginData.Passwort=a),onBlur:o[3]||(o[3]=a=>s.v$.loginData.Passwort.$touch())},null,544),[[f,e.loginData.Passwort]]),s.v$.loginData.Passwort.$error?(i(),d("span",q,"Mindestens 6 Zeichen erforderlich")):g("",!0)],2),A],32)])])}const H=h(B,[["render",G],["__scopeId","data-v-31632b55"]]);export{H as default};
